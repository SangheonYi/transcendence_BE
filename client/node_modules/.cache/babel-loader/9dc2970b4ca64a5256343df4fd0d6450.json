{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jinkim/nestjs_ex/bye_blackhole/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/jinkim/nestjs_ex/bye_blackhole/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/jinkim/nestjs_ex/bye_blackhole/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import\"./styles/RoomList.scss\";import'bootstrap/dist/css/bootstrap.min.css';import MakeRoomModal from'./MakeRoomModal';import PwRoomModal from'./PwRoomModal';import NoEntryModal from'./NoEntryModal';import axios from'axios';import lock_icon from'../images/private.png';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RoomList=function RoomList(_ref){var userName=_ref.userName,roomName=_ref.roomName,setRoomName=_ref.setRoomName;var handleRoomNameChange=function handleRoomNameChange(e){setRoomName(e.target.value);checkedRoomInfo(e.target.value);};//password\nvar _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),pw=_useState2[0],setPw=_useState2[1];var handPwChange=function handPwChange(e){setPw(e.target.value);};var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),bChecked=_useState4[0],setChecked=_useState4[1];var checkHandler=function checkHandler(e){setChecked(!bChecked);};//makeRoomModal\nvar _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),makeRoomModalOpen=_useState6[0],setMakeRoomModalOpen=_useState6[1];var openMakeRoomModal=function openMakeRoomModal(){setMakeRoomModalOpen(true);};var closeMakeRoomModal=function closeMakeRoomModal(){setMakeRoomModalOpen(false);};//pwRoomModal\nvar _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),pwRoomModalOpen=_useState8[0],setPwRoomModalOpen=_useState8[1];var openPwRoomModal=function openPwRoomModal(){setPwRoomModalOpen(true);};var closePwRoomModal=function closePwRoomModal(){setPwRoomModalOpen(false);setTryAgain(false);};//NoEntryModal\nvar _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),noEntryModalOpen=_useState10[0],setNoEntryModalOpen=_useState10[1];var openNoEntryModal=function openNoEntryModal(){setNoEntryModalOpen(true);};var closeNoEntryModal=function closeNoEntryModal(){setNoEntryModalOpen(false);};sessionStorage.setItem(\"roomName\",roomName);var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),roomListInfo=_useState12[0],setRoomListInfo=_useState12[1];useEffect(function(){getRoomList();},[]);function makeRoom(){return _makeRoom.apply(this,arguments);}function _makeRoom(){_makeRoom=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:userName=userName?userName:sessionStorage.getItem(\"userName\");_context.next=3;return axios.post('/RoomList',{id:roomName,password:pw,owner_id:userName});case 3:case\"end\":return _context.stop();}}},_callee);}));return _makeRoom.apply(this,arguments);}function getRoomList(){return _getRoomList.apply(this,arguments);}function _getRoomList(){_getRoomList=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.get('/RoomList/list');case 2:res=_context2.sent;setRoomListInfo(res.data);//setRoomListInfo([{id:\"r1\", password:\"1234\", owner_id:\"oid1\", num:1}, {id:\"r1\", password:\"\", owner_id:\"oid1\", num:1}])\ncase 4:case\"end\":return _context2.stop();}}},_callee2);}));return _getRoomList.apply(this,arguments);}var _useState13=useState(),_useState14=_slicedToArray(_useState13,2),roomInfo=_useState14[0],setRoomInfo=_useState14[1];function checkedRoomInfo(roomId){roomListInfo===null||roomListInfo===void 0?void 0:roomListInfo.map(function(room){if(room.id===roomId)setRoomInfo(room);});}function enterRoom(){return _enterRoom.apply(this,arguments);}function _enterRoom(){_enterRoom=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return axios.patch('/RoomList/incNum/'+roomName);case 2:document.location.href='/Chat';case 3:case\"end\":return _context3.stop();}}},_callee3);}));return _enterRoom.apply(this,arguments);}function enterTheRoom(){return _enterTheRoom.apply(this,arguments);}//input password check\nfunction _enterTheRoom(){_enterTheRoom=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(roomInfo){if(roomInfo.num>=10)//입장불가 modal\nopenNoEntryModal();else if(roomInfo.num<10&&roomInfo.password==\"\")//페이지 이동\nenterRoom();else//비밀번호 입력 modal\nopenPwRoomModal();}case 1:case\"end\":return _context4.stop();}}},_callee4);}));return _enterTheRoom.apply(this,arguments);}var _useState15=useState(),_useState16=_slicedToArray(_useState15,2),inputPw=_useState16[0],setInputPw=_useState16[1];var handleInputPwChange=function handleInputPwChange(e){setInputPw(e.target.value);};// password try again\nvar _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),tryAgain=_useState18[0],setTryAgain=_useState18[1];function enterPrivateRoom(){return _enterPrivateRoom.apply(this,arguments);}function _enterPrivateRoom(){_enterPrivateRoom=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(inputPw===(roomInfo===null||roomInfo===void 0?void 0:roomInfo.password))enterRoom();else setTryAgain(true);case 1:case\"end\":return _context5.stop();}}},_callee5);}));return _enterPrivateRoom.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{className:\"RoomList-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"makeRoom-box\",children:[/*#__PURE__*/_jsx(\"a\",{className:\"btn btn-primary btn-sm makeRoom\",onClick:openMakeRoomModal,children:/*#__PURE__*/_jsx(\"b\",{children:\"\\uBC29 \\uB9CC\\uB4E4\\uAE30\"})}),/*#__PURE__*/_jsxs(MakeRoomModal,{open:makeRoomModalOpen,close:closeMakeRoomModal,header:\"\\uBC29 \\uB9CC\\uB4E4\\uAE30\",makeRoom:makeRoom,children:[/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"\\xA0\\uBC29 \\uC81C\\uBAA9\\xA0\\xA0\\xA0\"}),/*#__PURE__*/_jsx(\"input\",{onChange:handleRoomNameChange})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"\\xA0\\xA0\",/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:bChecked,onChange:function onChange(e){return checkHandler(e);}}),\" private\"]}),bChecked?/*#__PURE__*/_jsxs(\"div\",{className:\"checkbox-pw\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"\\uBE44\\uBC00\\uBC88\\uD638\\xA0\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",onChange:handPwChange})]}):null]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"middle\",children:roomListInfo===null||roomListInfo===void 0?void 0:roomListInfo.map(function(room){return/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"room\",value:room.id,onChange:handleRoomNameChange}),/*#__PURE__*/_jsxs(\"div\",{className:\"box\",children:[/*#__PURE__*/_jsx(\"div\",{children:room.id}),/*#__PURE__*/_jsx(\"span\",{className:\"lock-image\",children:room.password!=\"\"?/*#__PURE__*/_jsx(\"img\",{src:lock_icon,width:\"20\",height:\"20\"}):null}),/*#__PURE__*/_jsxs(\"span\",{className:\"room-num\",children:[\"10/\",room.num]})]})]});})}),/*#__PURE__*/_jsxs(\"div\",{className:\"Join-button\",children:[/*#__PURE__*/_jsx(\"a\",{className:\"btn btn-dark\",onClick:enterTheRoom,children:/*#__PURE__*/_jsx(\"b\",{children:\"\\uC785\\uC7A5\\uD558\\uAE30\"})}),/*#__PURE__*/_jsx(NoEntryModal,{open:noEntryModalOpen,close:closeNoEntryModal,children:\"\\uC815\\uC6D0\\uC774 \\uB2E4 \\uCC3C\\uC2B5\\uB2C8\\uB2E4.\"}),/*#__PURE__*/_jsx(PwRoomModal,{open:pwRoomModalOpen,close:closePwRoomModal,header:\"\\uC785\\uC7A5\\uD558\\uAE30\",enterRoom:enterPrivateRoom,children:/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"\\uBE44\\uBC00\\uBC88\\uD638\\xA0\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",onChange:handleInputPwChange}),tryAgain?/*#__PURE__*/_jsx(\"span\",{className:\"tryAgain\",children:\"\\xA0\\uB2E4\\uC2DC \\uC2DC\\uB3C4\\uD558\\uC2ED\\uC2DC\\uC624\"}):null]})})]})]});};export default RoomList;","map":{"version":3,"sources":["/Users/jinkim/nestjs_ex/bye_blackhole/client/src/Chat/RoomList.tsx"],"names":["React","useEffect","useState","MakeRoomModal","PwRoomModal","NoEntryModal","axios","lock_icon","RoomList","userName","roomName","setRoomName","handleRoomNameChange","e","target","value","checkedRoomInfo","pw","setPw","handPwChange","bChecked","setChecked","checkHandler","makeRoomModalOpen","setMakeRoomModalOpen","openMakeRoomModal","closeMakeRoomModal","pwRoomModalOpen","setPwRoomModalOpen","openPwRoomModal","closePwRoomModal","setTryAgain","noEntryModalOpen","setNoEntryModalOpen","openNoEntryModal","closeNoEntryModal","sessionStorage","setItem","roomListInfo","setRoomListInfo","getRoomList","makeRoom","getItem","post","id","password","owner_id","get","res","data","roomInfo","setRoomInfo","roomId","map","room","enterRoom","patch","document","location","href","enterTheRoom","num","inputPw","setInputPw","handleInputPwChange","tryAgain","enterPrivateRoom"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from \"react\";\nimport \"./styles/RoomList.scss\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport MakeRoomModal from './MakeRoomModal';\nimport PwRoomModal from './PwRoomModal';\nimport NoEntryModal from './NoEntryModal'\nimport axios from 'axios';\nimport lock_icon from '../images/private.png'\n\ninterface HomeObj{\n\tuserName:any,\n\troomName:any,\n\tsetRoomName:(value:any)=>void,\n}\n\nconst RoomList = ({ userName, roomName, setRoomName}: HomeObj) => {\n  const handleRoomNameChange = (e:any) => {\n    setRoomName(e.target.value);\n\tcheckedRoomInfo(e.target.value)\n  };\n\n  //password\n  const [pw, setPw] = useState(\"\");\n  const handPwChange = (e:any) => {\n    setPw(e.target.value);\n  };\n\n  const [bChecked, setChecked] = useState(false);\n  const checkHandler = (e:any) => {\n    setChecked(!bChecked);\n  };\n\n\n  //makeRoomModal\n  const [makeRoomModalOpen, setMakeRoomModalOpen] = useState(false);\n  const openMakeRoomModal = () => {\n\tsetMakeRoomModalOpen(true);\n  }\n  const closeMakeRoomModal = () => {\n\tsetMakeRoomModalOpen(false);\n  }\n  //pwRoomModal\n  const [pwRoomModalOpen, setPwRoomModalOpen] = useState(false);\n  const openPwRoomModal = () => {\n\tsetPwRoomModalOpen(true);\n  }\n  const closePwRoomModal = () => {\n\tsetPwRoomModalOpen(false);\n\tsetTryAgain(false)\n  }\n  //NoEntryModal\n  const [noEntryModalOpen, setNoEntryModalOpen] = useState(false);\n  const openNoEntryModal = () => {\n\tsetNoEntryModalOpen(true);\n  }\n  const closeNoEntryModal = () => {\n\tsetNoEntryModalOpen(false);\n  }\n\n  sessionStorage.setItem(\"roomName\", roomName);\n\n  const [roomListInfo, setRoomListInfo] = useState<{id:string, password:string, owner_id:string, num:number}[]>();\n\n  useEffect(() => {\n\tgetRoomList()\n  }, [])\n\n  async function makeRoom(){\n\t  userName = userName ? userName : sessionStorage.getItem(\"userName\")\n\t  await axios.post('/RoomList', {id:roomName, password:pw, owner_id:userName});\n  }\n\n  async function getRoomList() {\n\t  const res = await axios.get('/RoomList/list');\n\t  setRoomListInfo(res.data)\n\t  //setRoomListInfo([{id:\"r1\", password:\"1234\", owner_id:\"oid1\", num:1}, {id:\"r1\", password:\"\", owner_id:\"oid1\", num:1}])\n  }\n\n\n  const [roomInfo, setRoomInfo] = useState<{id:String, password:String, owner_id:String, num:number}>();\n\n  function checkedRoomInfo(roomId:string)\n  {\n\t  roomListInfo?.map(room=>{\n\t\t  if (room.id === roomId)\n\t\t  setRoomInfo(room)\n\t\t})\n  }\n\n\n  async function enterRoom()\n  {\n\tawait axios.patch('/RoomList/incNum/' + roomName)\n\tdocument.location.href = '/Chat';\n  }\n\n  async function enterTheRoom() {\n\t  if (roomInfo)\n\t  {\n\t\t\tif (roomInfo.num >= 10) //입장불가 modal\n\t\t\t\topenNoEntryModal()\n\t\t\telse if (roomInfo.num < 10 && roomInfo.password == \"\") //페이지 이동\n\t\t\t\tenterRoom()\n\t\t\telse //비밀번호 입력 modal\n\t\t\t\topenPwRoomModal()\n\t\t}\n\t}\n\n\t//input password check\n\tconst [inputPw, setInputPw] = useState();\n\tconst handleInputPwChange = (e:any) => {\n\t\tsetInputPw(e.target.value);\n\t};\n\n\t// password try again\n\tconst [tryAgain, setTryAgain] = useState(false);\n\n\tasync function enterPrivateRoom() {\n\t\tif (inputPw === roomInfo?.password)\n\t\t\tenterRoom()\n\t\telse\n\t\t\tsetTryAgain(true);\n\t}\n\n\n  return (\n    <div className=\"RoomList-container\">\n\t\t<div className=\"makeRoom-box\">\n\t\t\t<a className=\"btn btn-primary btn-sm makeRoom\" onClick={openMakeRoomModal}><b>방 만들기</b></a>\n\t\t\t<MakeRoomModal open={makeRoomModalOpen} close={closeMakeRoomModal} header=\"방 만들기\" makeRoom={makeRoom}>\n\t\t\t\t<label >\n\t\t\t\t\t<b>&nbsp;방 제목&nbsp;&nbsp;&nbsp;</b>\n\t\t\t\t\t<input onChange={handleRoomNameChange}></input>\n\t\t\t\t</label>\n\t\t\t\t<label>\n\t\t\t\t\t&nbsp;&nbsp;<input type=\"checkbox\" checked={bChecked} onChange={(e) => checkHandler(e)} ></input> private\n\t\t\t\t</label>\n\t\t\t\t{bChecked ?\n\t\t\t\t\t<div className=\"checkbox-pw\">\n\t\t\t\t\t<b>비밀번호&nbsp;</b>\n\t\t\t\t\t<input type=\"password\" onChange={handPwChange}></input>\n\t\t\t\t\t</div>\n\t\t\t\t\t: null\n\t\t\t\t}\n\t\t\t</MakeRoomModal>\n\t\t</div>\n\t\t<div className=\"middle\">\n\t\t\t{roomListInfo?.map(room=>\n\t\t\t\t<label>\n\t\t\t\t\t<input type=\"radio\" name=\"room\" value={room.id} onChange={handleRoomNameChange}/>\n\t\t\t\t\t<div className=\"box\">\n\t\t\t\t\t\t<div>{room.id}</div>\n\t\t\t\t\t\t<span className=\"lock-image\">{room.password != \"\" ? <img src={lock_icon} width=\"20\" height=\"20\"></img> : null}</span>\n\t\t\t\t\t\t<span className=\"room-num\">10/{room.num}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</label>\n\t\t\t)}\n\t\t</div>\n\t\t<div className=\"Join-button\">\n\t\t\t<a className=\"btn btn-dark\" onClick={enterTheRoom}><b>입장하기</b></a>\n\t\t\t<NoEntryModal open={noEntryModalOpen} close={closeNoEntryModal} >\n\t\t\t\t정원이 다 찼습니다.\n\t\t\t</NoEntryModal>\n\t\t\t<PwRoomModal open={pwRoomModalOpen} close={closePwRoomModal} header=\"입장하기\" enterRoom={enterPrivateRoom}>\n\t\t\t\t<label>\n\t\t\t\t\t<b>비밀번호&nbsp;</b>\n\t\t\t\t\t<input type=\"password\" onChange={handleInputPwChange}></input>\n\t\t\t\t\t{tryAgain ? <span className=\"tryAgain\">&nbsp;다시 시도하십시오</span> : null}\n\t\t\t\t</label>\n\t\t\t</PwRoomModal>\n\t\t</div>\n    </div>\n  );\n};\n\nexport default RoomList;"]},"metadata":{},"sourceType":"module"}