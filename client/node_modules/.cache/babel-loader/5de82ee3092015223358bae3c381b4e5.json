{"ast":null,"code":"import _toConsumableArray from\"/goinfre/jinkim/bye_blackhole/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/goinfre/jinkim/bye_blackhole/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import\"./styles/ChatLog.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ChatLog=function ChatLog(_ref){var userName=_ref.userName,socket=_ref.socket;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),msgList=_useState2[0],setMsgList=_useState2[1];useEffect(function(){// messsgeItem : {msg: String, name: String, timeStamp: String}\nsocket.on(\"onReceive\",function(messageItem){userName=userName?userName:sessionStorage.getItem(\"userName\");if(userName===messageItem.userName)setMsgList(function(msgList){return[].concat(_toConsumableArray(msgList),[{myMsg:messageItem.msg,timeStamp:messageItem.timeStamp}]);});else setMsgList(function(msgList){return[].concat(_toConsumableArray(msgList),[messageItem]);});console.log(messageItem);console.log(userName);});socket.on(\"onConnect\",function(systemMessage){setMsgList(function(msgList){return[].concat(_toConsumableArray(msgList),[{sysMsg:systemMessage}]);});});socket.on(\"onDisconnect\",function(systemMessage){setMsgList(function(msgList){return[].concat(_toConsumableArray(msgList),[{sysMsg:systemMessage}]);});});return function(){socket.disconnect();};},[socket]);return/*#__PURE__*/_jsx(\"div\",{children:msgList.map(function(msg,idx){return/*#__PURE__*/_jsxs(\"div\",{children:[msg.userName&&/*#__PURE__*/_jsx(\"div\",{className:\"msg-userName\",children:msg.userName}),msg.msg&&/*#__PURE__*/_jsxs(\"div\",{className:\"msgLeft\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"msg-msg\",children:msg.msg}),/*#__PURE__*/_jsxs(\"span\",{className:\"msg-timeStamp\",children:[\"(\",msg.timeStamp,\")\"]})]}),msg.myMsg&&/*#__PURE__*/_jsxs(\"div\",{className:\"msgRight\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"msg-timeStamp\",children:[\"(\",msg.timeStamp,\")\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"msg-msg\",children:msg.myMsg})]}),/*#__PURE__*/_jsx(\"div\",{className:\"sysMsg\",children:msg.sysMsg})]},idx);})});};export default ChatLog;","map":{"version":3,"sources":["/goinfre/jinkim/bye_blackhole/client/src/Chat/ChatLog.tsx"],"names":["React","useEffect","useState","ChatLog","userName","socket","msgList","setMsgList","on","messageItem","sessionStorage","getItem","myMsg","msg","timeStamp","console","log","systemMessage","sysMsg","disconnect","map","idx"],"mappings":"8TAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAO,sBAAP,C,wFAGA,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,MAA+B,IAA5BC,CAAAA,QAA4B,MAA5BA,QAA4B,CAAlBC,MAAkB,MAAlBA,MAAkB,eACfH,QAAQ,CAAQ,EAAR,CADO,wCACtCI,OADsC,eAC7BC,UAD6B,eAG7CN,SAAS,CAAC,UAAM,CACjB;AACGI,MAAM,CAACG,EAAP,CAAU,WAAV,CAAuB,SAACC,WAAD,CAAkE,CAC3FL,QAAQ,CAAGA,QAAQ,CAAGA,QAAH,CAAcM,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAAjC,CACC,GAAIP,QAAQ,GAAKK,WAAW,CAACL,QAA7B,CACDG,UAAU,CAAC,SAACD,OAAD,qCAAiBA,OAAjB,GAA0B,CAACM,KAAK,CAAEH,WAAW,CAACI,GAApB,CAAyBC,SAAS,CAAEL,WAAW,CAACK,SAAhD,CAA1B,IAAD,CAAV,CADC,IAGDP,CAAAA,UAAU,CAAC,SAACD,OAAD,qCAAiBA,OAAjB,GAA0BG,WAA1B,IAAD,CAAV,CACIM,OAAO,CAACC,GAAR,CAAYP,WAAZ,EACHM,OAAO,CAACC,GAAR,CAAYZ,QAAZ,EACE,CARD,EASAC,MAAM,CAACG,EAAP,CAAU,WAAV,CAAuB,SAACS,aAAD,CAA2B,CAChDV,UAAU,CAAC,SAACD,OAAD,qCAAiBA,OAAjB,GAA0B,CAAEY,MAAM,CAAED,aAAV,CAA1B,IAAD,CAAV,CACD,CAFD,EAGAZ,MAAM,CAACG,EAAP,CAAU,cAAV,CAA0B,SAACS,aAAD,CAAwB,CAChDV,UAAU,CAAC,SAACD,OAAD,qCAAiBA,OAAjB,GAA0B,CAAEY,MAAM,CAAED,aAAV,CAA1B,IAAD,CAAV,CACD,CAFD,EAGA,MAAO,WAAM,CACXZ,MAAM,CAACc,UAAP,GACD,CAFD,CAGD,CApBQ,CAoBN,CAACd,MAAD,CApBM,CAAT,CAsBA,mBACE,qBACGC,OAAO,CAACc,GAAR,CAAY,SAACP,GAAD,CAAMQ,GAAN,qBACX,uBACFR,GAAG,CAACT,QAAJ,eACM,YAAK,SAAS,CAAC,cAAf,UAA+BS,GAAG,CAACT,QAAnC,EAFJ,CAIJS,GAAG,CAACA,GAAJ,eACA,aAAK,SAAS,CAAC,SAAf,wBACS,aAAM,SAAS,CAAC,SAAhB,UAA2BA,GAAG,CAACA,GAA/B,EADT,cAEC,cAAM,SAAS,CAAC,eAAhB,eAAkCA,GAAG,CAACC,SAAtC,OAFD,GALI,CAUJD,GAAG,CAACD,KAAJ,eACA,aAAK,SAAS,CAAC,UAAf,wBACC,cAAM,SAAS,CAAC,eAAhB,eAAkCC,GAAG,CAACC,SAAtC,OADD,cAES,aAAM,SAAS,CAAC,SAAhB,UAA2BD,GAAG,CAACD,KAA/B,EAFT,GAXI,cAgBJ,YAAK,SAAS,CAAC,QAAf,UAA0BC,GAAG,CAACK,MAA9B,EAhBI,GAAUG,GAAV,CADW,EAAZ,CADH,EADF,CAwBD,CAjDD,CAmDA,cAAelB,CAAAA,OAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport \"./styles/ChatLog.css\";\n\n\nconst ChatLog = ({ userName, socket }: any) => {\n  const [msgList, setMsgList] = useState<any[]>([]);\n\n  useEffect(() => {\n\t// messsgeItem : {msg: String, name: String, timeStamp: String}\n    socket.on(\"onReceive\", (messageItem: {userName:string, msg:string, timeStamp:string}) => {\n\t\tuserName = userName ? userName : sessionStorage.getItem(\"userName\")\n\t  if (userName === messageItem.userName)\n\t\tsetMsgList((msgList) => [...msgList, {myMsg: messageItem.msg, timeStamp: messageItem.timeStamp} as never]);\n\t  else\n\t\tsetMsgList((msgList) => [...msgList, messageItem]);\n      console.log(messageItem);\n\t  console.log(userName)\n    });\n    socket.on(\"onConnect\", (systemMessage: string) => {\n      setMsgList((msgList) => [...msgList, { sysMsg: systemMessage } as never]);\n    });\n    socket.on(\"onDisconnect\", (systemMessage: any) => {\n      setMsgList((msgList) => [...msgList, { sysMsg: systemMessage } as never]);\n    });\n    return () => {\n      socket.disconnect();\n    };\n  }, [socket]);\n\n  return (\n    <div>\n      {msgList.map((msg, idx) => (\n        <div key={idx}>\n\t\t  \t{msg.userName &&\n          \t\t<div className=\"msg-userName\">{msg.userName}</div>\n\t\t\t}\n\t\t\t{msg.msg &&\n\t\t\t\t<div className=\"msgLeft\">\n          \t\t\t<span className=\"msg-msg\">{msg.msg}</span>\n\t\t\t\t\t<span className=\"msg-timeStamp\">({msg.timeStamp})</span>\n\t\t\t\t</div>\n\t\t\t}\n\t\t\t{msg.myMsg &&\n\t\t\t\t<div className=\"msgRight\">\n\t\t\t\t\t<span className=\"msg-timeStamp\">({msg.timeStamp})</span>\n          \t\t\t<span className=\"msg-msg\">{msg.myMsg}</span>\n\t\t\t\t</div>\n\t\t\t}\n\t\t  <div className=\"sysMsg\" >{msg.sysMsg}</div>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default ChatLog;"]},"metadata":{},"sourceType":"module"}